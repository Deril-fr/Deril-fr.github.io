import{r as S,d as w,a as y,c as l,u as g,b as R,o as c,e as r,f as E,g as B,t as m,h as F,F as L,i as V,j as N,k as b,l as j,m as M,n as P,p as T,q}from"./vendor-820858f6.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(e){if(e.ep)return;e.ep=!0;const n=t(e);fetch(e.href,n)}})();var I=(i=>(i.vf="vf",i.vostfr="vostfr",i))(I||{});const x=S({vf:[],vostfr:[]}),O=S({language:I.vostfr}),D={class:"bg-zinc-900 text-white min-h-screen px-10"},H={key:0,class:"w-screen h-screen grid justify-items-center items-center"},J=r("div",{class:"bg-red-900 bg-opacity-50 p-5 rounded"},[r("h1",null,[E("L'extension "),r("span",{class:"text-red-500"},"Allow CORS"),E(" est requise pour utiliser notre site web")])],-1),K=[J],W={key:1},z=w({__name:"App",setup(i){let o=y(!1);return fetch("https://neko-sama.fr/animes-search-vf.json").then(t=>t.json()).then(t=>{x.vf=t,o.value=!0}),o&&fetch("https://neko-sama.fr/animes-search-vostfr.json").then(t=>t.json()).then(t=>{x.vostfr=t}),(t,s)=>{const e=B("RouterView");return c(),l("main",D,[g(o)==!1?(c(),l("div",H,K)):(c(),l("div",W,[R(e)]))])}}}),G=["src"],Q={class:"mt-5 grid"},X={class:"text-lg font-bold whitespace-nowrap text-ellipsis overflow-hidden"},Y=w({__name:"AnimeCardComponent",props:{anime:null},setup(i){const o=i;return(t,s)=>(c(),l("div",{class:"w-full",onClick:s[0]||(s[0]=e=>g(d).push("/anime/"+o.anime.id))},[r("img",{class:"w-full rounded object-cover aspect-[9/13]",src:o.anime.url_image,alt:""},null,8,G),r("div",Q,[r("h5",X,m(o.anime.title),1),r("h6",null,m(o.anime.start_date_year)+" - "+m(o.anime.nb_eps),1)])]))}});function Z(i,o){const t=[];for(let s=0;s<i.length;s+=o)t.push(i.slice(s,s+o));return t}const ee={key:0,class:"grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-6 gap-10"},te=w({__name:"HomeView",setup(i){let o=y([]),t=y(0);return F(()=>{let s=setInterval(()=>{o.value=Z(x.vostfr,20)},100);o.value.length>0&&clearInterval(s)}),(s,e)=>g(o)?(c(),l("div",ee,[(c(!0),l(L,null,V(g(o)[g(t)],n=>(c(),l("div",{key:n.id},[R(Y,{anime:n},null,8,["anime"])]))),128)),r("button",{onClick:e[0]||(e[0]=n=>N(t)?t.value--:t--)},"prev"),r("button",{onClick:e[1]||(e[1]=n=>N(t)?t.value++:t++)},"next")])):b("",!0)}});async function se(i){var v,_,k,$,C;const o=await(await fetch(i)).text(),t=(v=/(else {\n(.*)video\[0] = ')(.*)(';)/gm.exec(o))==null?void 0:v[3],s=await(await fetch(t)).text();let e=(_=/(https:\/\/www\.pstream\.net\/u\/player-script.*)(" type)/gm.exec(s))==null?void 0:_[1],n="https://www.pstream.net";if(e||(e=(k=/(https:\/\/veestream\.net\/u\/player-script.*)(" type)/gm.exec(s))==null?void 0:k[1],n="https://veestream.net"),e||(e=($=/(https:\/\/fusevideo\.net\/u\/player-script.*)(" type)/gm.exec(s))==null?void 0:$[1],n="https://fusevideo.net"),!e)return!1;const a=await(await fetch(e)).text(),p=(C=/e.parseJSON\(atob\(t\).slice\(2\)\)\}\(\"([^;]*)"\),/gm.exec(a))==null?void 0:C[1],f=JSON.parse(atob(p).slice(2)),u=f.mmmmmmmmmmmmmmmmmmmm,h=f.subtitlesvtt;return{uri:u,subtitles:h,baseurl:n}}function oe(i){return new DOMParser().parseFromString(i,"text/html").body.textContent||""}function ne(i){return Number(i.replace("Ep. ",""))}async function A(i){var u,h;const t=await(await fetch("https://neko-sama.fr"+i)).text(),s=/var episodes = (.+)\;/gm.exec(t);let e=[],n="",a="";s&&(e=JSON.parse(s[1]).map(_=>({episode:ne(_.episode.toString()),time:_.time,title:_.title,url:_.url,url_image:_.url_image})));const p=(u=/(<div class="synopsis">\n<p>\n)(.*)/gm.exec(t))==null?void 0:u[2];p&&(n=p);const f=(h=/(<div id="head" style="background-image: url\()(.*)(\);)/gm.exec(t))==null?void 0:h[2];return f&&(a=f),{synopsis:oe(n.replace("<br/>",`
`).replace("<br />",`
`).replace("<br>",`
`)),episodes:e,coverURL:a}}const re={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-10"},ie={class:"flex flex-col"},ae=["src"],le={class:"mt-5"},ce={class:"text-lg font-bold whitespace-nowrap text-ellipsis overflow-hidden"},ue={class:"flex flex-col"},de=r("h1",{class:"text-2xl font-bold"},"Synopsis",-1),pe={class:"mt-5"},me={class:"mt-5"},fe=r("h1",{class:"text-2xl font-bold"},"Episodes",-1),_e={class:"mt-5 grid grid-cols-1 md:grid-cols-2 gap-10"},he=["onClick"],ve=["src"],ge={class:"mt-5 grid"},ye={class:"text-lg font-bold whitespace-nowrap text-ellipsis overflow-hidden"},xe=w({__name:"AnimeView",setup(i){const o=d.currentRoute.value.params.id,t=y(void 0),s=y({synopsis:"",episodes:[],coverURL:""});return j(()=>{if(typeof o=="string"){let e=x[O.language].find(n=>n.id==parseInt(o));e?(t.value=e,A(e.url).then(n=>{s.value=n})):d.push("/")}}),(e,n)=>t.value?(c(),l("div",re,[r("div",ie,[r("img",{class:"w-full rounded object-cover aspect-[13/9]",src:s.value.coverURL,alt:""},null,8,ae),r("div",le,[r("h5",ce,m(t.value.title),1),r("h6",null,m(t.value.start_date_year)+" - "+m(t.value.nb_eps),1)])]),r("div",ue,[de,r("p",pe,m(s.value.synopsis),1),r("div",me,[fe,r("div",_e,[(c(!0),l(L,null,V(s.value.episodes,a=>(c(),l("div",{key:a.episode},[r("div",{class:"w-full",onClick:p=>t.value&&g(d).push("/anime/"+t.value.id+"/episode/"+a.episode)},[r("img",{class:"w-full rounded object-cover aspect-[13/9]",src:a.url_image,alt:""},null,8,ve),r("div",ge,[r("h5",ye,m(a.title),1),r("h6",null,"Ep. "+m(a.episode),1)])],8,he)]))),128))])])])])):b("",!0)}}),we={key:0},be=r("video",{id:"player",controls:"",class:"w-full h-full"},null,-1),ke=[be],$e=w({__name:"EpisodeView",setup(i){let o=d.currentRoute.value.params.episode,t=d.currentRoute.value.params.id;const s=y();return j(()=>{if(typeof o=="string"&&typeof t=="string"){let e=parseInt(t),n=parseInt(o),a=x[O.language].find(p=>p.id==e);a?A(a.url).then(p=>{let f=p.episodes.find(u=>u.episode==n);f?se("https://neko-sama.fr"+f.url).then(u=>{if(u){if(s.value={mp4:!1,uri:u.uri,available:!0,baseurl:u.baseurl},s.value&&s.value.available){console.log(s.value.uri);let h=document.getElementById("player"),v=new M;v.loadSource(s.value.uri),v.attachMedia(h)}}else console.log("Video not found"),d.push("/")}):(console.log("Episode not found"),d.push("/"))}):(console.log("Anime not found"),d.push("/"))}}),(e,n)=>s.value?(c(),l("div",we,ke)):b("",!0)}}),d=P({history:T("/"),routes:[{path:"/",name:"home",component:te},{path:"/anime/:id",name:"anime",component:xe},{path:"/anime/:id/episode/:episode",name:"episode",component:$e}]});const U=q(z);U.use(d);U.mount("#app");
