import{r as f}from"./removeDuplicates-4a376775.js";import{c as o,d as m}from"./index-91bd3bd6.js";import{C as c,O as l,U as g,K as u}from"./vendor-03815684.js";async function y(a){let i=await L();i.find(t=>t.id===a.id&&t.lang===a.lang)&&(i=i.filter(t=>t.id!==a.id||t.lang!==a.lang)),i.push(a),localStorage.setItem("animeList",JSON.stringify(f(i)));const e=o.currentUser;if(e){const t=c(m,"users",e.uid);await l(t)?g(t,{animeList:i}):u(t,{animeList:i})}}function A(a,i,e){const t=localStorage.getItem("animeList");return(t?JSON.parse(t):[]).find(s=>s.id===a&&s.episode===i&&s.lang===e)}async function L(){const a=localStorage.getItem("animeList");let i=[];if(a===null){const t=o.currentUser;if(t){const r=c(m,"users",t.uid),s=await l(r);if(s){const n=s.data();n?(i=n.animeList?n.animeList:[],localStorage.setItem("animeList",JSON.stringify(n.animeList))):localStorage.setItem("animeList",JSON.stringify([]))}else localStorage.setItem("animeList",JSON.stringify([]))}}return a?JSON.parse(a):i}export{L as a,A as g,y as s};
