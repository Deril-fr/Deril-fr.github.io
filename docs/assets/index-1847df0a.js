import{r as N,d as x,a as h,c as d,u as l,b as w,e as E,o as p,f as r,g as S,h as B,t as u,F as j,i as O,j as M,k as P,l as T,m as F,n as U}from"./vendor-31ddd66a.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function t(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(e){if(e.ep)return;e.ep=!0;const n=t(e);fetch(e.href,n)}})();const v=N({vf:[],vostfr:[]}),D={class:"bg-zinc-900 text-white min-h-screen px-10"},H={key:0,class:"w-screen h-screen grid justify-items-center items-center"},J=r("div",{class:"bg-red-900 bg-opacity-50 p-5 rounded"},[r("h1",null,[S("L'extension "),r("span",{class:"text-red-500"},"Allow CORS"),S(" est requise pour utiliser notre site web")])],-1),q=[J],I={key:1},K=x({__name:"App",setup(i){let s=h(!1);t();async function t(){v.vf=await(await fetch("https://neko-sama.fr/animes-search-vf.json")).json(),s.value=!0,s&&(v.vostfr=await(await fetch("https://neko-sama.fr/animes-search-vostfr.json")).json())}return(o,e)=>{const n=B("RouterView");return p(),d("main",D,[l(s)==!1?(p(),d("div",H,q)):w("",!0),l(s)&&l(v).vostfr.length>0?(p(),d("div",I,[E(n)])):w("",!0)])}}}),W=["src"],z={class:"mt-5 grid"},G={class:"text-lg font-bold whitespace-nowrap text-ellipsis overflow-hidden"},Q=x({__name:"AnimeCardComponent",props:{anime:null},setup(i){const s=i;return(t,o)=>(p(),d("div",{class:"w-full",onClick:o[0]||(o[0]=e=>l(m).push("/anime/"+s.anime.id))},[r("img",{class:"w-full rounded object-cover aspect-[9/13]",src:s.anime.url_image,alt:""},null,8,W),r("div",z,[r("h5",G,u(s.anime.title),1),r("h6",null,u(s.anime.start_date_year)+" - "+u(s.anime.nb_eps),1)])]))}});function X(i,s){const t=[];for(let o=0;o<i.length;o+=s)t.push(i.slice(o,o+s));return t}const Y={key:0},Z={class:"grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-6 gap-10"},ee={class:"flex justify-between py-5"},te=x({__name:"HomeView",setup(i){let s=h(X(v.vostfr,30)),t=h(0);function o(e){if(console.log(e),scrollTo(0,0),e==-1){t.value=s.value.length-1;return}if(e==s.value.length){t.value=0;return}t.value=e}return(e,n)=>l(s)?(p(),d("section",Y,[r("div",Z,[(p(!0),d(j,null,O(l(s).at(l(t)),a=>(p(),d("div",{key:a.id},[E(Q,{anime:a},null,8,["anime"])]))),128))]),r("div",ee,[r("button",{onClick:n[0]||(n[0]=a=>o(l(t)-1))},"prev"),r("p",null,u(l(t)+1)+"/"+u(l(s).length),1),r("button",{onClick:n[1]||(n[1]=a=>o(l(t)+1))},"next")])])):w("",!0)}});var R=(i=>(i.vf="vf",i.vostfr="vostfr",i))(R||{});const A=N({language:R.vostfr});async function se(i){var b,_,$,k,C;const s=await(await fetch(i)).text(),t=(b=/(else {\n(.*)video\[0] = ')(.*)(';)/gm.exec(s))==null?void 0:b[3],o=await(await fetch(t)).text();let e=(_=/(https:\/\/www\.pstream\.net\/u\/player-script.*)(" type)/gm.exec(o))==null?void 0:_[1],n="https://www.pstream.net";if(e||(e=($=/(https:\/\/veestream\.net\/u\/player-script.*)(" type)/gm.exec(o))==null?void 0:$[1],n="https://veestream.net"),e||(e=(k=/(https:\/\/fusevideo\.net\/u\/player-script.*)(" type)/gm.exec(o))==null?void 0:k[1],n="https://fusevideo.net"),!e)return!1;const a=await(await fetch(e)).text(),f=(C=/e.parseJSON\(atob\(t\).slice\(2\)\)\}\(\"([^;]*)"\),/gm.exec(a))==null?void 0:C[1],c=JSON.parse(atob(f).slice(2)),g=c.mmmmmmmmmmmmmmmmmmmm,y=c.subtitlesvtt;return{uri:g,subtitles:y,baseurl:n}}function oe(i){return new DOMParser().parseFromString(i,"text/html").body.textContent||""}function ne(i){return Number(i.replace("Ep. ",""))}async function L(i){var g,y;const t=await(await fetch("https://neko-sama.fr"+i)).text(),o=/var episodes = (.+)\;/gm.exec(t);let e=[],n="",a="";o&&(e=JSON.parse(o[1]).map(_=>({episode:ne(_.episode.toString()),time:_.time,title:_.title,url:_.url,url_image:_.url_image})));const f=(g=/(<div class="synopsis">\n<p>\n)(.*)/gm.exec(t))==null?void 0:g[2];f&&(n=f);const c=(y=/(<div id="head" style="background-image: url\()(.*)(\);)/gm.exec(t))==null?void 0:y[2];return c&&(a=c),{synopsis:oe(n.replace("<br/>",`
`).replace("<br />",`
`).replace("<br>",`
`)),episodes:e,coverURL:a}}const re={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-10"},ie={class:"flex flex-col"},ae=["src"],le={class:"mt-5"},ce={class:"text-lg font-bold whitespace-nowrap text-ellipsis overflow-hidden"},ue={class:"flex flex-col"},de=r("h1",{class:"text-2xl font-bold"},"Synopsis",-1),pe={class:"mt-5"},me={class:"mt-5"},fe=r("h1",{class:"text-2xl font-bold"},"Episodes",-1),_e={class:"mt-5 grid grid-cols-1 md:grid-cols-2 gap-10"},he=["onClick"],ve=["src"],ge={class:"mt-5 grid"},ye={class:"text-lg font-bold whitespace-nowrap text-ellipsis overflow-hidden"},we=x({__name:"AnimeView",setup(i){const s=m.currentRoute.value.params.id,t=h(void 0);let o=h(void 0),e=h(void 0),n=h(void 0);return M(async()=>{var f;t.value=v[A.language].find(function(c){return c.id.toString()===s});let a=await L((f=t.value)==null?void 0:f.url);o.value=a.synopsis,e.value=a.coverURL,n.value=a.episodes}),(a,f)=>t.value&&l(e)?(p(),d("div",re,[r("div",ie,[r("img",{class:"w-full rounded object-cover aspect-[13/9]",src:l(e),alt:""},null,8,ae),r("div",le,[r("h5",ce,u(t.value.title),1),r("h6",null,u(t.value.start_date_year)+" - "+u(t.value.nb_eps),1)])]),r("div",ue,[de,r("p",pe,u(l(o)),1),r("div",me,[fe,r("div",_e,[(p(!0),d(j,null,O(l(n),c=>(p(),d("div",{key:c.episode},[r("div",{class:"w-full",onClick:g=>t.value&&l(m).push("/anime/"+t.value.id+"/episode/"+c.episode)},[r("img",{class:"w-full rounded object-cover aspect-[13/9]",src:c.url_image,alt:""},null,8,ve),r("div",ge,[r("h5",ye,u(c.title),1),r("h6",null,"Ep. "+u(c.episode),1)])],8,he)]))),128))])])])])):w("",!0)}}),xe={data(){return{currentEpisode:m.currentRoute.value.params.episode,id:m.currentRoute.value.params.id,video:h()}},async mounted(){let i=v[A.language].find(e=>e.id.toString()==this.id);if(!i)return m.push("/");let t=(await L(i.url)).episodes.find(e=>e.episode.toString()==this.currentEpisode);if(!t)return m.push("/");let o=await se("https://neko-sama.fr"+t.url);if(!o)return m.push("/");if(console.log(o),this.video={mp4:!1,uri:o.uri,available:!0,baseurl:o.baseurl},console.log(this.video),this.video&&this.video.available){let e=new P;e.loadSource(this.video.uri),e.attachMedia(this.$refs.player),console.log(this.$refs.player)}}},be=(i,s)=>{const t=i.__vccOpts||i;for(const[o,e]of s)t[o]=e;return t},$e={ref:"player",controls:"",class:"w-full h-full"};function ke(i,s,t,o,e,n){return p(),d("div",null,[r("video",$e,null,512)])}const Ce=be(xe,[["render",ke]]),Se=T({history:F("/"),routes:[{path:"/",name:"home",component:te},{path:"/anime/:id",name:"anime",component:we},{path:"/anime/:id/episode/:episode",name:"episode",component:Ce}]}),m=Se;const V=U(K);V.use(m);V.mount("#app");
