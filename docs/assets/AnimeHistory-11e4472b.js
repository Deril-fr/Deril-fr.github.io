import{c as b,g as w}from"./animehelper-da611cd9.js";import{a as x}from"./timer-a538d2fe.js";import{b as y,a as k}from"./index-36d2f09d.js";import{r as N,o as i,c as a,b as o,a as p,w as E,t as r,d as z,h as V,y as j,u as v,F as A,A as C,l as R}from"./vendor-7c7bf4c4.js";import{a as $}from"./storage-bc4e6ca5.js";import"./removeDuplicates-4a376775.js";const D={props:{anime:Object,animeReal:Object,asNew:Boolean},methods:{convertEpisodeToNumber:b,getDuration:x}},S={key:0},B={key:0,class:"bg-green-500 p-3 ml-16 rounded absolute"},F={key:1,class:"bg-red-500 p-3 rounded absolute"},O={class:"w-full rounded object-cover aspect-[9/13]",alt:""},q={class:"mt-5 grid"},H={class:"text-lg font-bold whitespace-nowrap text-ellipsis overflow-hidden"},L={key:1},T=z('<div class="w-full animate-pulse grid gap-5"><div class="w-full rounded object-cover aspect-[9/13] bg-zinc-800"></div><div class="grid gap-2"><h1 class="bg-zinc-800 text-zinc-800">lorem ipsum sin dolores</h1><h1 class="bg-zinc-800 text-zinc-800 w-[40%]">l</h1></div></div>',1),W=[T];function G(m,d,e,c,s,t){var n,u,_;const l=N("lazy");return e.anime?(i(),a("div",S,[o("div",{class:"w-full",onClick:d[0]||(d[0]=Z=>{var h,g,f;return m.$router.push("/anime/"+((h=e.anime)==null?void 0:h.lang)+"/"+((g=e.animeReal)==null?void 0:g.id)+"/episode/"+((f=e.anime)==null?void 0:f.episode.toString()))})},[e.asNew?(i(),a("p",B,"NEW Ã©pisodes dispo ! ")):p("",!0),((n=e.anime)==null?void 0:n.lang)=="vf"?(i(),a("p",F,"VF")):p("",!0),E(o("img",O,null,512),[[l,{src:(u=e.animeReal)==null?void 0:u.url_image,loading:"/default_thumbnail.png"}]]),o("div",q,[o("h5",H,r((_=e.animeReal)==null?void 0:_.title),1),o("h6",null,"Episode "+r(e.anime.episode)+" - "+r(t.getDuration(e.anime.time)),1)])])])):(i(),a("div",L,W))}const I=y(D,[["render",G]]),J={class:"px-10"},K={class:"flex justify-between py-5"},M=o("h1",{class:"text-3xl font-bold"},"Accueil",-1),P=[M],Q={key:0,class:"grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-6 gap-10"},U={key:1,class:"flex justify-center items-center h-[80vh]"},X=o("h1",{class:"text-3xl font-bold"},"Aucun anime dans l'historique",-1),Y=[X],ne=V({__name:"AnimeHistory",setup(m){let d=j();return $().then(e=>{w().then(c=>{let s=k.all.filter(t=>e.find(l=>l.id===t.id&&l.lang===t.lang));d.value=s.map(t=>{let l=c.find(n=>n.anime_url===t.url);return{animes:t,lastEpisodes:e.find(n=>n.id===t.id),asNew:l?e.find(n=>n.id===t.id).episode<b(l.episode):!1}})})}),(e,c)=>(i(),a("section",J,[o("div",K,[o("div",{onClick:c[0]||(c[0]=s=>e.$router.push("/")),class:"cursor-pointer"},P)]),v(d)?(i(),a("div",Q,[(i(!0),a(A,null,C(v(d),s=>(i(),a("div",{key:s.lastEpisodes.id+s.lastEpisodes.lang},[R(I,{animeReal:s.animes,anime:s.lastEpisodes,asNew:s.asNew},null,8,["animeReal","anime","asNew"])]))),128))])):(i(),a("div",U,Y))]))}});export{ne as default};
