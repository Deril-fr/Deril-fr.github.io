import{r as N,d as y,a as v,c as m,u as c,b as x,e as E,o as f,f as n,g as S,h as M,t as p,F as j,i as R,j as B,k as P,l as T,m as F,n as U,p as D}from"./vendor-a00efcde.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerpolicy&&(s.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?s.credentials="include":e.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(e){if(e.ep)return;e.ep=!0;const s=t(e);fetch(e.href,s)}})();const g=N({vf:[],vostfr:[]}),H={class:"bg-zinc-900 text-white min-h-screen px-10"},J={key:0,class:"w-screen h-screen grid justify-items-center items-center"},q=n("div",{class:"bg-red-900 bg-opacity-50 p-5 rounded"},[n("h1",null,[S("L'extension "),n("span",{class:"text-red-500"},"Allow CORS"),S(" est requise pour utiliser notre site web")])],-1),I=[q],K={key:1},W=y({__name:"App",setup(i){let o=v(!1);t();async function t(){g.vf=await(await fetch("https://neko-sama.fr/animes-search-vf.json")).json(),o.value=!0,o&&(g.vostfr=await(await fetch("https://neko-sama.fr/animes-search-vostfr.json")).json())}return(r,e)=>{const s=M("RouterView");return f(),m("main",H,[c(o)==!1?(f(),m("div",J,I)):x("",!0),c(o)&&c(g).vostfr.length>0?(f(),m("div",K,[E(s)])):x("",!0)])}}}),z=["src"],G={class:"mt-5 grid"},Q={class:"text-lg font-bold whitespace-nowrap text-ellipsis overflow-hidden"},X=y({__name:"AnimeCardComponent",props:{anime:null},setup(i){const o=i;return(t,r)=>(f(),m("div",{class:"w-full",onClick:r[0]||(r[0]=e=>c(_).push("/anime/"+o.anime.id))},[n("img",{class:"w-full rounded object-cover aspect-[9/13]",src:o.anime.url_image,alt:""},null,8,z),n("div",G,[n("h5",Q,p(o.anime.title),1),n("h6",null,p(o.anime.start_date_year)+" - "+p(o.anime.nb_eps),1)])]))}});function Y(i,o){const t=[];for(let r=0;r<i.length;r+=o)t.push(i.slice(r,r+o));return t}const Z={key:0},ee={class:"grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-6 gap-10"},te={class:"flex justify-between py-5"},se=y({__name:"HomeView",setup(i){let o=v(Y(g.vostfr,30)),t=v(0);function r(e){if(console.log(e),scrollTo(0,0),e==-1){t.value=o.value.length-1;return}if(e==o.value.length){t.value=0;return}t.value=e}return(e,s)=>c(o)?(f(),m("section",Z,[n("div",ee,[(f(!0),m(j,null,R(c(o).at(c(t)),a=>(f(),m("div",{key:a.id},[E(X,{anime:a},null,8,["anime"])]))),128))]),n("div",te,[n("button",{onClick:s[0]||(s[0]=a=>r(c(t)-1))},"prev"),n("p",null,p(c(t)+1)+"/"+p(c(o).length),1),n("button",{onClick:s[1]||(s[1]=a=>r(c(t)+1))},"next")])])):x("",!0)}});var A=(i=>(i.vf="vf",i.vostfr="vostfr",i))(A||{});const L=N({language:A.vostfr});async function oe(i){var b,h,k,$,C;const o=await(await fetch(i)).text(),t=(b=/(else {\n(.*)video\[0] = ')(.*)(';)/gm.exec(o))==null?void 0:b[3],r=await(await fetch(t)).text();let e=(h=/(https:\/\/www\.pstream\.net\/u\/player-script.*)(" type)/gm.exec(r))==null?void 0:h[1],s="https://www.pstream.net";if(e||(e=(k=/(https:\/\/veestream\.net\/u\/player-script.*)(" type)/gm.exec(r))==null?void 0:k[1],s="https://veestream.net"),e||(e=($=/(https:\/\/fusevideo\.net\/u\/player-script.*)(" type)/gm.exec(r))==null?void 0:$[1],s="https://fusevideo.net"),!e)return!1;const a=await(await fetch(e)).text(),d=(C=/e.parseJSON\(atob\(t\).slice\(2\)\)\}\(\"([^;]*)"\),/gm.exec(a))==null?void 0:C[1],l=JSON.parse(atob(d).slice(2)),u=l.mmmmmmmmmmmmmmmmmmmm,w=l.subtitlesvtt;return{uri:u,subtitles:w,baseurl:s}}function ne(i){return new DOMParser().parseFromString(i,"text/html").body.textContent||""}function re(i){return Number(i.replace("Ep. ",""))}async function O(i){var u,w;const t=await(await fetch("https://neko-sama.fr"+i)).text(),r=/var episodes = (.+)\;/gm.exec(t);let e=[],s="",a="";r&&(e=JSON.parse(r[1]).map(h=>({episode:re(h.episode.toString()),time:h.time,title:h.title,url:h.url,url_image:h.url_image})));const d=(u=/(<div class="synopsis">\n<p>\n)(.*)/gm.exec(t))==null?void 0:u[2];d&&(s=d);const l=(w=/(<div id="head" style="background-image: url\()(.*)(\);)/gm.exec(t))==null?void 0:w[2];return l&&(a=l),{synopsis:ne(s.replace("<br/>",`
`).replace("<br />",`
`).replace("<br>",`
`)),episodes:e,coverURL:a}}const ie={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-10"},ae={class:"flex flex-col"},le=["src"],ce={class:"mt-5"},ue={class:"text-lg font-bold whitespace-nowrap text-ellipsis overflow-hidden"},de={class:"flex flex-col"},pe=n("h1",{class:"text-2xl font-bold"},"Synopsis",-1),me={class:"mt-5"},fe={class:"mt-5"},_e=n("h1",{class:"text-2xl font-bold"},"Episodes",-1),he={class:"mt-5 grid grid-cols-1 md:grid-cols-2 gap-10"},ve=["onClick"],ge=["src"],ye={class:"mt-5 grid"},we={class:"text-lg font-bold whitespace-nowrap text-ellipsis overflow-hidden"},xe=y({__name:"AnimeView",setup(i){const o=_.currentRoute.value.params.id,t=v(void 0);let r=v(void 0),e=v(void 0),s=v(void 0);return B(async()=>{var d;t.value=g[L.language].find(function(l){return l.id.toString()===o});let a=await O((d=t.value)==null?void 0:d.url);r.value=a.synopsis,e.value=a.coverURL,s.value=a.episodes}),(a,d)=>t.value&&c(e)?(f(),m("div",ie,[n("div",ae,[n("img",{class:"w-full rounded object-cover aspect-[13/9]",src:c(e),alt:""},null,8,le),n("div",ce,[n("h5",ue,p(t.value.title),1),n("h6",null,p(t.value.start_date_year)+" - "+p(t.value.nb_eps),1)])]),n("div",de,[pe,n("p",me,p(c(r)),1),n("div",fe,[_e,n("div",he,[(f(!0),m(j,null,R(c(s),l=>(f(),m("div",{key:l.episode},[n("div",{class:"w-full",onClick:u=>t.value&&c(_).push("/anime/"+t.value.id+"/episode/"+l.episode)},[n("img",{class:"w-full rounded object-cover aspect-[13/9]",src:l.url_image,alt:""},null,8,ge),n("div",ye,[n("h5",we,p(l.title),1),n("h6",null,"Ep. "+p(l.episode),1)])],8,ve)]))),128))])])])])):x("",!0)}}),be=y({__name:"EpisodeView",setup(i){let o=_.currentRoute.value.params.episode,t=_.currentRoute.value.params.id,r;const e=v();return P(async()=>{let s=g[L.language].find(u=>u.id.toString()==t);if(!s)return _.push("/");let d=(await O(s.url)).episodes.find(u=>u.episode.toString()==o);if(!d)return _.push("/");let l=await oe("https://neko-sama.fr"+d.url);if(!l)return _.push("/");if(e.value={mp4:!1,uri:l.uri,available:!0,baseurl:l.baseurl},e.value&&e.value.available){let u=new T;u.loadSource(e.value.uri),u.attachMedia(r)}}),(s,a)=>(f(),m("div",null,[n("video",{ref_key:"player",ref:r,controls:"",class:"w-full h-full"},null,512)]))}}),_=F({history:U("/"),routes:[{path:"/",name:"home",component:se},{path:"/anime/:id",name:"anime",component:xe},{path:"/anime/:id/episode/:episode",name:"episode",component:be}]});const V=D(W);V.use(_);V.mount("#app");
